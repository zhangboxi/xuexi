<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			function promise1(value,sign) {
				console.log('停止' + value + '秒');
				return new Promise((resovle, reject) => {

					window.setTimeout(() => {
						if(sign){
							resovle(value);
						}else{
							reject(value);
						}
						
					}, value)

				})
			}

// 			let p1 = promise1(300,true);
// 
// 			let p2 = promise1(500,false);

			// let arr = [p1.then(() => console.log('p1执行完成')).catch(()=>console.log('p1报错')), p2.then(() => console.log('p2执行完成')).catch(()=>console.log('p2报错'))];

// 			Promise.all(arr).then(function(posts) {
// 				console.log('all执行');
// 			}).catch(function(reason) {
// 				console.log('all报错');
// 			});

			Promise.all([promise1(300,false).then(()=>console.log('p1完成'),()=>{console.log('p1错误');throw new Error(' 报错了');}),promise1(500,true)]).then(function(values) {
				console.log('all执行');
				console.log(values)
			}).catch(function(reason) {
				console.log('all报错');
			});


			console.log('-----------------');

// 						function runAsync1() {
// 							var p = new Promise(function(resolve, reject) {
// 								//做一些异步操作
// 								setTimeout(function() {
// 									console.log('异步任务1执行完成');
// 									reject('随便什么数据1');
// 								}, 1000);
// 							});
// 							return p;
// 						}
// 			
// 						function runAsync2() {
// 							var p = new Promise(function(resolve, reject) {
// 								//做一些异步操作
// 								setTimeout(function() {
// 									console.log('异步任务2执行完成');
// 									resolve('随便什么数据2');
// 								}, 2000);
// 							});
// 							return p;
// 						}
// 			
// 						function runAsync3() {
// 							var p = new Promise(function(resolve, reject) {
// 								//做一些异步操作
// 								setTimeout(function() {
// 									console.log('异步任务3执行完成');
// 									resolve('随便什么数据3');
// 								}, 2000);
// 							});
// 							return p;
// 						}
// 						Promise
// 							.all([runAsync1(), runAsync2(), runAsync3()])
// 							.then(function(results) {
// 								console.log(results);
// 							}).catch(function(error){
// 								console.log('baocuo');
// 							});
		</script>
	</body>
</html>
